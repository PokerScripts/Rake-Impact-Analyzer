# –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è —Ä–µ–π–∫–∞ –Ω–∞ –≤–∏–Ω—Ä–µ–π—Ç –∏ EV/—á–∞—Å

**Rake-Impact-Analyzer** `rake.py` ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–ª–∏—è–Ω–∏—è —Ä–µ–π–∫–∞ –Ω–∞ –≤–∏–Ω—Ä–µ–π—Ç –∏ EV/—á–∞—Å –≤ –∫—ç—à-–∏–≥—Ä–∞—Ö –ø–æ –ø–æ–∫–µ—Ä—É. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å, –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–π–∫–∞ (–ø—Ä–æ—Ü–µ–Ω—Ç, –∫—ç–ø, —á–∞—Å—Ç–æ—Ç–∞ —Ä–µ–π–∫–∞–±–µ–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –∏ —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ—Ç–∞) –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∞—à —á–∏—Å—Ç—ã–π bb/100, EV/—á–∞—Å –∏ EV –∑–∞ —Å–µ—Å—Å–∏—é. –°–∫—Ä–∏–ø—Ç —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—ç–ø –∏–ª–∏ —Ä–∞–∑–º–µ—Ä –±–∞–Ω–∫–∞) –Ω–∞–∏–±–æ–ª–µ–µ —Å–∏–ª—å–Ω–æ ¬´–¥–∞–≤—è—Ç¬ª –Ω–∞ –≤–∞—à—É –ø—Ä–∏–±—ã–ª—å.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîπ –†–∞—Å—á—ë—Ç **—á–∏—Å—Ç–æ–≥–æ –≤–∏–Ω—Ä–µ–π—Ç–∞ –ø–æ—Å–ª–µ —Ä–µ–π–∫–∞ (Net bb/100)**
- üîπ –û—Ü–µ–Ω–∫–∞ **EV/—á–∞—Å** –∏ **EV/—Å–µ—Å—Å–∏–∏**
- üîπ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ **Cash / Zoom** –∏ –ø–æ—Å–∞–¥–æ–∫ **6-max / 9-max**
- üîπ –£—á—ë—Ç:
  - –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Ä–µ–π–∫–∞ –∏ –∫—ç–ø–∞ –≤ bb  
  - –¥–æ–ª–∏ —Ä—ç–π–∫–∞–±–µ–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤  
  - —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–∫–∞ (–≤ bb)  
  - VPIP / PFR –∏–≥—Ä–æ–∫–∞ (–¥–ª—è –æ—Ü–µ–Ω–∫–∏ –¥–æ–ª–∏ —Ä–µ–π–∫–∞)
- üîπ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª–∏–º–∏—Ç–æ–≤** –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- üîπ **–°—Ü–µ–Ω–∞—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (sensitivity)** —Å ASCII-—Ç–µ–ø–ª–æ–∫–∞—Ä—Ç–æ–π
- üîπ –í—ã–≤–æ–¥ –≤ **CSV** –∏ **Markdown**
- üîπ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π ‚Äî **—Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python**

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞–ø—Ä—è–º—É—é:

```bash
git clone https://github.com/PokerScripts/Rake-Impact-Analyzer.git
cd Rake-Impact-Analyzer
python rake.py --help
````

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

* Python **3.8+**

---

## üß† –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚ñ∂Ô∏è 1. –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç (`single`)

```bash
python rake.py single --format cash --seats 6 --winrate_bb100 4.5 \
  --rake_percent 5 --rake_cap_bb 3 --avg_pot_bb 18 --rake_triggers_frac 0.42 \
  --hands_per_hour 650 --bb 1 --hours 2 --md_out rake-report.md
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
============================================================
–§–æ—Ä–º–∞—Ç: cash  |  Seats: 6  |  Hands/h: 650
Player share (–æ—Ü–µ–Ω–∫–∞): 0.33
------------------------------------------------------------
Winrate (pre-rake):     +4.50 bb/100
Rake per 100 (table):   6.30 bb/100
Your share (bb/100):    2.08
------------------------------------------------------------
Net winrate:            +2.42 bb/100
EV/h (bb):              +15.73
EV/h ($):               +15.73
EV/session ($):         +31.46
============================================================
```

---

### ‚öñÔ∏è 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ (`compare`)

–ò—Å–ø–æ–ª—å–∑—É—è CSV-—Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ª–∏–º–∏—Ç–æ–≤:

`limits.csv`

```csv
name,bb,rake_percent,cap_bb,hands_per_hour,avg_pot_bb,rake_triggers_frac
NL10,0.1,5,3,600,18,0.42
NL25,0.25,5,2.5,650,20,0.40
NL50,0.5,5,2,700,22,0.38
```

–ö–æ–º–∞–Ω–¥–∞:

```bash
python rake.py compare --table limits.csv --format cash --seats 6 --winrate_bb100 4.5 --bb 1 --csv_out compare.csv
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
Limit      | Net bb/100 | EV/h bb | EV/h $
--------------------------------------------------
NL50       | +2.68 | +18.76 | +18.76
NL25       | +2.45 | +15.93 | +15.93
NL10       | +2.12 | +12.72 | +12.72
--------------------------------------------------
```

---

### üìà 3. –ê–Ω–∞–ª–∏–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (`sensitivity`)

```bash
python rake.py sensitivity \
  --format cash --seats 6 --winrate_bb100 4.5 \
  --rake_percent 5 --rake_cap_bb 3 \
  --avg_pot_bb 15 --rake_triggers_frac 0.4 \
  --x avg_pot_bb:10:40:5 --y rake_triggers_frac:0.3:0.6:0.05 \
  --keep net_bb100 --csv_out sens.csv
```

**–í—ã–≤–æ–¥:**

```
  2.10   2.34   2.45   2.55   2.60   2.63   2.65
  1.90   2.14   2.26   2.37   2.42   2.45   2.47
  ...
```

---

## üßÆ –§–æ—Ä–º—É–ª—ã

* **–†–µ–π–∫ —Å –±–∞–Ω–∫–∞:**
`rake_raw = avg_pot_bb * rake_percent / 100`

* **–° —É—á—ë—Ç–æ–º –∫—ç–ø–∞ –∏ —à–∞–≥–∞:**
`rake_final = min(rake_raw, rake_cap_bb)` ‚Üí –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –≤–≤–µ—Ä—Ö –¥–æ `rake_step`

* **–†–µ–π–∫/100 —Ä—É–∫:**
`rake_per_100_bb = 100 * rake_triggers_frac * rake_final`

* **–î–æ–ª—è –∏–≥—Ä–æ–∫–∞:**
`player_share ‚âà max(0.15, 0.5 * (vpip + pfr))`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.33` (6-max)

* **–í–∞—à —Ä–µ–π–∫/100:**
`player_rake_bb100 = rake_per_100_bb * player_share`

* **–ß–∏—Å—Ç—ã–π –≤–∏–Ω—Ä–µ–π—Ç:**
`net_bb100 = winrate_bb100 - player_rake_bb100`

* **EV/—á–∞—Å:**
`ev_per_hour_bb = net_bb100 * hands_per_hour / 100`

---

## üîç –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

* **–í—ã—Å–æ–∫–∏–π –∫—ç–ø –≤—ã–≥–æ–¥–µ–Ω** –ø—Ä–∏ –∫—Ä—É–ø–Ω—ã—Ö –±–∞–Ω–∫–∞—Ö: —Ä–µ–π–∫ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Ä–∞—Å—Ç–∏.
* **–ú–µ–ª–∫–∏–µ —Ä–µ–π–∫–∞–±–µ–ª—å–Ω—ã–µ –±–∞–Ω–∫–∏** (–Ω–∏–∑–∫–∏–π avg_pot_bb, –≤—ã—Å–æ–∫–∏–π triggers_frac) ‚Äî –≥–ª–∞–≤–Ω—ã–π –≤—Ä–∞–≥ –≤–∏–Ω—Ä–µ–π—Ç–∞.
* **Zoom —Ñ–æ—Ä–º–∞—Ç—ã** –∏–º–µ—é—Ç –±–æ–ª—å—à–∏–π —Ä—É–∫/—á–∞—Å, –Ω–æ —Ä–µ–π–∫/100 –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—à–µ.
* **–ü—Ä–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–º net_bb100** ‚Äî –¥–∞–∂–µ –ø—Ä–∏ –ø–ª—é—Å–æ–≤–æ–º pre-rake winrate ‚Äî —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–∏–º–∏—Ç.

---

## üß™ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å—á—ë—Ç–æ–≤:

```bash
python rake.py selftest
```

**–í—ã–≤–æ–¥:**

```
== SELFTEST ==
OK ‚úÖ
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ [MIT](LICENSE). –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –∫–æ–¥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∞.
